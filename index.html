<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>IoT & AI Challenge | Inscription</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">

<style>
*{
  box-sizing:border-box;
  font-family:'Cairo', sans-serif;
}
body{
  margin:0;
  min-height:100vh;
  background:
    linear-gradient(rgba(10,20,40,.85), rgba(10,20,40,.85)),
    url("e6c2a3fa-9455-45f2-95ff-c8023b92aedb-md.jpeg") center/cover no-repeat;
  display:flex;
  justify-content:center;
  align-items:center;
  padding:16px;
}

.container{
  width:100%;
  max-width:520px;
}

.card{
  background:#fff;
  border-radius:18px;
  box-shadow:0 30px 70px rgba(0,0,0,.4);
  overflow:hidden;
}

.header{
  background:#1f3c88;
  color:#fff;
  padding:22px;
  text-align:center;
}

.header h2{
  margin:0;
  font-size:20px;
}

.header p{
  font-size:13px;
  margin-top:6px;
  opacity:.9;
}

.form-body{
  padding:26px;
}

.section-title{
  font-size:14px;
  font-weight:700;
  margin:18px 0 10px;
  color:#1f3c88;
}

.field{
  margin-bottom:14px;
}

.row{
  display:flex;
  gap:10px;
}

label{
  display:block;
  font-size:13px;
  font-weight:600;
  margin-bottom:5px;
}

input{
  width:100%;
  padding:11px;
  border-radius:10px;
  border:1px solid #ccc;
  font-size:14px;
}

input:focus{
  outline:none;
  border-color:#1f3c88;
}

button{
  width:100%;
  padding:14px;
  background:#1f3c88;
  color:#fff;
  border:none;
  border-radius:12px;
  font-size:15px;
  font-weight:600;
  cursor:pointer;
  margin-top:18px;
}

.success{
  display:none;
  padding:40px 25px;
  text-align:center;
}
</style>
</head>

<body>

<div class="container">
<div class="card">

  <div class="header">
    <h2>IoT & AI Challenge</h2>
    <p>Formulaire d'inscription par équipe</p>
  </div>

  <div class="form-body" id="formBox">
    <form id="form">

      <!-- CHEF -->
      <div class="section-title">Chef du groupe</div>

      <div class="field">
        <label>Nom & Prénom – Classe</label>
        <div class="row">
          <input type="text" id="chef_name" placeholder="Nom et Prénom" required>
          <input type="text" id="chef_class" placeholder="Classe" required>
        </div>
      </div>

      <div class="field">
        <label>Adresse mail</label>
        <input type="email" id="chef_email" required>
      </div>

      <!-- MEMBERS -->
      <div class="section-title">Membres</div>

      <div class="field">
        <label>Membre 1</label>
        <div class="row">
          <input type="text" id="m1_name" placeholder="Nom et Prénom">
          <input type="text" id="m1_class" placeholder="Classe">
        </div>
      </div>

      <div class="field">
        <label>Membre 2</label>
        <div class="row">
          <input type="text" id="m2_name" placeholder="Nom et Prénom">
          <input type="text" id="m2_class" placeholder="Classe">
        </div>
      </div>

      <div class="field">
        <label>Membre 3</label>
        <div class="row">
          <input type="text" id="m3_name" placeholder="Nom et Prénom">
          <input type="text" id="m3_class" placeholder="Classe">
        </div>
      </div>

      <div class="field">
        <label>Membre 4</label>
        <div class="row">
          <input type="text" id="m4_name" placeholder="Nom et Prénom">
          <input type="text" id="m4_class" placeholder="Classe">
        </div>
      </div>

      <button type="submit">Valider l'inscription</button>
    </form>
  </div>

  <div class="success" id="successBox">
    <h3>✅ Inscription réussie</h3>
    <p>Votre équipe a été enregistrée avec succès.</p>
  </div>

</div>
</div>

<div class="header">
  <h2>IoT & AI Challenge</h2>
  <img src="A_digital_graphic_banner_for_the_\"IoT_&_AI_Challen.png" alt="IoT & AI Banner" class="header-banner">
  <p>Formulaire d'inscription par équipe</p>
</div>

<script>
const scriptURL = "https://script.google.com/macros/s/AKfycbzlWEP0yCjesi6PdVpPTMVaYQMI-4UDkUhiM1BMFUZpIx41_lpP_BPXCZ6NESRmpbjIwA/exec";

const form = document.getElementById("form");
const formBox = document.getElementById("formBox");
const successBox = document.getElementById("successBox");

form.addEventListener("submit", async (e) => {
  e.preventDefault();

  const payload = {
    chef_name: document.getElementById("chef_name").value,
    chef_class: document.getElementById("chef_class").value,
    chef_email: document.getElementById("chef_email").value,
    m1_name: document.getElementById("m1_name").value,
    m1_class: document.getElementById("m1_class").value,
    m2_name: document.getElementById("m2_name").value,
    m2_class: document.getElementById("m2_class").value,
    m3_name: document.getElementById("m3_name").value,
    m3_class: document.getElementById("m3_class").value,
    m4_name: document.getElementById("m4_name").value,
    m4_class: document.getElementById("m4_class").value
  };

  try {
    const res = await fetch(scriptURL, {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify(payload)
    });

    const data = await res.text();

    if (data === "SUCCESS") {
      formBox.style.display = "none";
      successBox.style.display = "block";
    } else if (data === "EMAIL_EXISTS") {
      alert("❌ Cet email est déjà utilisé");
    } else if (data === "LIMIT_REACHED") {
      alert("❌ Le nombre maximum de 10 équipes est atteint");
    } else {
      alert("❌ Erreur serveur");
    }

  } catch (err) {
    alert("❌ Problème de connexion");
    console.error(err);
  }
});
</script>


</body>
</html>












